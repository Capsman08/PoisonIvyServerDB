<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Poison Ivy Reports Database</title>

		<link rel="stylesheet" href="/css/styles.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
 
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript" src="/js/scripts.js"></script>

	</head>
	<body id="ivy-body">

		<div id="ivy-banner">
			<h1 id="ivy-banner-title" class="ivy-banner-item">ITCHY Project</h1>

			<div id="poison-ivy-link" class="ivy-banner-option ivy-banner-item">

				<p class="ivy-banner-option-text">Poison Ivy</p>

			</div>
		</div>

		<div id="container">

			<h2 id="project-title">Appalachian Trail Poison Ivy Data</h2>

			

			<h2 id="data-type-title">Reports Data</h3>

			<table class="table table-striped table-light">
				<thead>
					<tr>
						<th scope="col">ID</th>
						<th scope="col">User ID</th>
						<th scope="col">Plant Type</th>
						<th scope="col">Latitude</th>
						<th scope="col">Longitude</th>
						<th scope="col">Date/Time</th>
					</tr>

				</thead>
				<tbody id="reports-table-body">
					<script>

						var xhttp = new XMLHttpRequest();
				        xhttp.onload = function() {
						    if (this.status == 200) {
						    	var responseText = $.parseJSON(this.responseText);


						      	//populate the table
						      	for (i = 0; i < responseText.length; i++)
						      	{
					      			var newRowID = "<th scope='row'>" + responseText[i].reportID + "</th>"; 
					      			var newRowUID = "<td>" + responseText[i].UID + "</td>";
					      			var newRowPlantType = "<td>" + responseText[i].plant_type + "</td>";
					      			var newRowLatitude = "<td>" + responseText[i].latitude + "</td>";
					      			var newRowLongitude = "<td>" + responseText[i].longitude + "</td>";
					      			var newRowDateTime = "<td>" + responseText[i].date_time + "</td>";
					      			var newRow = "<tr>" + newRowID + newRowUID + newRowPlantType + newRowLatitude + newRowLongitude + newRowDateTime + "</tr>";
					      			$("#reports-table-body").append(newRow);
						      	}

						      
						    }
					  	};

					  	xhttp.open('GET', '/reports');
					  	xhttp.send();

					</script>


				</tbody>
			</table>

			<nav id="data-page-selector" aria-label="Page navigation example">
			 	<ul class="pagination">
			    	<li class="page-item"><a class="page-link" href="#">Previous</a></li>
			    	<li class="page-item"><a class="page-link" href="#">1</a></li>
			    	<li class="page-item"><a class="page-link" href="#">Next</a></li>
			 	</ul>
			</nav>

			<button id="download-reports-csv-button" type="button" class="btn btn-light download-csv-button">Download CSV file</button>
			<script>

				$("#download-reports-csv-button").click( function () {
					var xhttp = new XMLHttpRequest();
			        xhttp.onload = function() {
					    if (this.status == 200) {
					    	responseText = this.responseText;
					      	window.alert(responseText);
					      
					    }
				  	};

				  	xhttp.open('GET', '/viewreports');
				  	xhttp.send();
				});

			</script>

			<h3 id="data-type-title">User Data</h3>

			<table class="table table-striped table-light">
				<thead>
					<tr>
						<th scope="col">ID</th>
						<th scope="col">Email</th>
						<th scope="col">Screen Name</th>
					</tr>

				</thead>
				<tbody id="users-table-body">
					
					<script>

						var xhttp = new XMLHttpRequest();
				        xhttp.onload = function() {
						    if (this.status == 200) {
						    	var responseText = $.parseJSON(this.responseText);


						      	//populate the table
						      	for (i = 0; i < responseText.length; i++)
						      	{
					      			var newRowUID = "<th scope='row'>" + responseText[i].UID + "</th>"; 
					      			var newRowEmail = "<td>" + responseText[i].email + "</td>";
					      			var newRowScreenname = "<td>" + responseText[i].screenname + "</td>";
					      			var newRow = "<tr>" + newRowUID + newRowEmail + newRowScreenname + "</tr>";
					      			$("#users-table-body").append(newRow);
						      	}

						      
						    }
					  	};

					  	xhttp.open('GET', '/users');
					  	xhttp.send();

					</script>

				</tbody>
			</table>

			<nav id="data-page-selector" aria-label="Page navigation example">
			 	<ul class="pagination">
			    	<li class="page-item"><a class="page-link" href="#">Previous</a></li>
			    	<li class="page-item"><a class="page-link" href="#">1</a></li>
			    	<li class="page-item"><a class="page-link" href="#">Next</a></li>
			 	</ul>
			</nav>

			<button id="download-users-csv-button"  type="button" class="btn btn-light download-csv-button">Download CSV file</button>
			<script>

				$("#download-users-csv-button").click( function () {
					var xhttp = new XMLHttpRequest();
			        xhttp.onload = function() {
					    if (this.status == 200) {
					    	responseText = this.responseText;
					      	window.alert(responseText);
					      
					    }
				  	};

				  	xhttp.open('GET', '/viewusers');
				  	xhttp.send();
				});

			</script>

		</div> 


	</body>




</html>